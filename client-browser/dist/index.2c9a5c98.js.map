{"mappings":"mkBAAIA,mHAEJ,IAAIC,EAAO,GAoBXD,WAlBkBE,OAChB,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,QCRlCE,EAAA,SAAAC,SAA8CC,KAAKC,MAAK,uGCG3CC,UAAmBC,0BASxBC,aAPMC,MAAKC,KAAQC,aAAY,CAAGC,KAAI,gBAGhCC,QAAO,QACPC,SAAQ,QAITC,iCACAC,oCACAC,mBAGCF,4BACN,MAAMG,EAAQC,SAASC,cAAa,SAC9BC,EAAOF,SAASC,cAAa,QACnCF,EAAMI,UAAYC,ECrBZ,s2BDsBNF,EAAKC,UAAYC,EEtBX,koBFuBDd,MAAMe,OAAON,EAAOG,QACpBI,SAAWJ,OACXK,cAAgBL,EAAKM,cAAa,YAGjCX,oCACDS,SAASG,iBAAgB,eAAgBC,SAAQC,SAC7CjB,QAAQiB,EAAMC,aAAY,SAAYD,UAG1CL,SAASG,iBAAgB,gBAAiBC,SAAQG,SAC9ClB,SAASkB,EAAOD,aAAY,SAAYC,KAI3Cf,wBACDH,SAASmB,QAAQC,iBAAgB,SAAUC,GAAEzB,KAAS0B,kBACtDtB,SAASuB,OAAOH,iBAAgB,SAAUC,GAAEzB,KAAS4B,YAG9DC,+CAKI,GAAE7B,KAAO8B,IAAG,UAEEC,MAAK,gCAA+B/B,KAAO8B,MAAG,CAAME,OAAM,WACnE,MAAQC,GAEL,MADAC,MAAK,SAAYD,GACX,IAAIE,MAAMF,QAGnBG,yBAIL,MAAMC,EAAShD,OAAOiD,YAAYjD,OAAOkD,QAAOvC,KAAMG,SAASqC,KAAG,EAAGC,EAAKrB,KAAK,CAAOqB,EAAKrB,EAAMsB,UAE3FC,QAAiBZ,MAAK,gCAA+B/B,KAAO8B,KAAG,KAAA,CACjEE,OAAMhC,KAAO8B,IAAG,MAAQ,OACxBc,QAAO,gBAAkB,oBACzBC,KAAMnD,KAAKoD,UAAUT,KAGzB,GAAwB,MAApBM,EAASI,OAET,MADAb,MAAK,qBACC,IAAIC,MAAK,+CAGnB,MAAMa,QAAwBL,EAASM,OAClCD,EAAgBE,UAChBpB,IAAMkB,EAAgBE,KAKnCC,eAAeC,OAAM,mBAAqBxD,GG5E1C,MAAMyD,EAAS5C,SAASQ,cAAa,QACdR,SAASQ,cAAa,wBAE9BO,iBAAgB,SAAUC,IACrC,MAAM6B,EAAe,IAAI1D,EACzByD,EAAOvC,OAAOwC","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-53ddd52aa0ffc575.js","src/components/form-pessoa/index.ts","node_modules/@parcel/runtime-js/lib/bundles/runtime-88b202fb72056a34.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-57c5c21990077064.js","src/main.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"kg95X\\\":\\\"index.2c9a5c98.js\\\",\\\"79nUm\\\":\\\"index.b7257079.css\\\"}\"));","import stringStyle from \"bundle-text:./form-pessoa.scss\"\r\nimport stringHtml from \"bundle-text:./form-pessoa.html\"\r\n\r\nexport class FormPessoa extends HTMLElement {\r\n    protected _id: number\r\n    protected _root = this.attachShadow({ mode: \"closed\" })\r\n    protected _domMain: HTMLElement\r\n    protected _domActionBar: HTMLDivElement\r\n    protected _inputs: { [prop: string]: HTMLInputElement } = {}\r\n    protected _buttons: { [prop: string]: HTMLButtonElement } = {}\r\n\r\n    constructor() {\r\n        super()\r\n        this._criarElementosPrincipais()\r\n        this._referenciarBotoesEElementos()\r\n        this._atribuirEventos()\r\n    }\r\n\r\n    protected _criarElementosPrincipais() {\r\n        const style = document.createElement(\"style\")\r\n        const main = document.createElement(\"main\")\r\n        style.innerHTML = stringStyle\r\n        main.innerHTML = stringHtml\r\n        this._root.append(style, main)\r\n        this._domMain = main\r\n        this._domActionBar = main.querySelector(\".actions\")\r\n    }\r\n\r\n    protected _referenciarBotoesEElementos() {\r\n        this._domMain.querySelectorAll(\"input[name]\").forEach(input => {\r\n            this._inputs[input.getAttribute(\"name\")] = input as HTMLInputElement\r\n        })\r\n\r\n        this._domMain.querySelectorAll(\"button[name]\").forEach(button => {\r\n            this._buttons[button.getAttribute(\"name\")] = button as HTMLButtonElement\r\n        })\r\n    }\r\n\r\n    protected _atribuirEventos() {\r\n        this._buttons.remover.addEventListener(\"click\", ev => this._remover())\r\n        this._buttons.salvar.addEventListener(\"click\", ev => this._salvar())\r\n    }\r\n\r\n    carregarDadosPreCarregados() {\r\n        // este método será desenvolvido futuramente neste tutorial\r\n    }\r\n\r\n    protected async _remover() {\r\n        if (this._id) {\r\n            try {\r\n                await fetch(`http://localhost:8080/pessoa/${this._id}`, { method: \"DELETE\" })\r\n            } catch (e) {\r\n                alert(\"ERRO: \" + e)\r\n                throw new Error(e)\r\n            }\r\n        }\r\n        this.remove()\r\n    }\r\n\r\n    protected async _salvar() {\r\n        const values = Object.fromEntries(Object.entries(this._inputs).map(([key, input]) => [key, input.value]))\r\n\r\n        const resposta = await fetch(`http://localhost:8080/pessoa/${this._id || ''}`, {\r\n            method: this._id ? \"PUT\" : \"POST\",\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(values)\r\n        })\r\n\r\n        if (resposta.status !== 200) {\r\n            alert(\"ERRO NO SERVIDOR!\")\r\n            throw new Error(\"Erro por parte do servidor ao inserir dados\")\r\n        }\r\n\r\n        const dadosDaResposta = await resposta.json()\r\n        if (!dadosDaResposta.id) return\r\n        this._id = dadosDaResposta.id\r\n    }\r\n}\r\n\r\n//\r\ncustomElements.define(\"comp-form-pessoa\", FormPessoa)\r\n","module.exports = \"449b6715e355481e\";","module.exports = \"38ba2fd6f5d272cd\";","// importa o arquivo de estilo\r\nimport \"./main.scss\" \r\nimport { FormPessoa } from \"./components/form-pessoa\"\r\n\r\nconst elMain = document.querySelector(\"main\")\r\nconst elBtNovaPessoa = document.querySelector(\".bt-adicionar-pessoa\")\r\n\r\nelBtNovaPessoa.addEventListener(\"click\", ev => {\r\n    const elFormPessoa = new FormPessoa()\r\n    elMain.append(elFormPessoa)\r\n})\r\n"],"names":["$5b2b3cdd5d136d36$export$357eb1b4f03c1402","$5b2b3cdd5d136d36$var$mapping","pairs","keys","Object","i","length","parcelRequire","register","JSON","parse","$5d0625da7793a943$export$435c704588415a2e","HTMLElement","super","_root","this","attachShadow","mode","_inputs","_buttons","_criarElementosPrincipais","_referenciarBotoesEElementos","_atribuirEventos","style","document","createElement","main","innerHTML","$parcel$interopDefault","append","_domMain","_domActionBar","querySelector","querySelectorAll","forEach","input","getAttribute","button","remover","addEventListener","ev","_remover","salvar","_salvar","carregarDadosPreCarregados","_id","fetch","method","e","alert","Error","remove","values","fromEntries","entries","map","key","value","resposta","headers","body","stringify","status","dadosDaResposta","json","id","customElements","define","$ca7b339a1b24dc80$var$elMain","elFormPessoa"],"version":3,"file":"index.2c9a5c98.js.map"}